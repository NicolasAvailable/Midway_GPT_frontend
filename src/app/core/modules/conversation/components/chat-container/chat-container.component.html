<section class="flex w-full h-full">
  <div class="chat__container--left w-full h-full flex flex-col">
    <div #header class="chat__header">
      <mw-chat-header
        [room]="room"
        [isOpenDetails]="isOpenDetails"
        (detailTrigger)="isOpenDetails = $event"
      ></mw-chat-header>
    </div>
    <div
      autoScroll
      class="chat__content flex flex-col overflow-auto justify-center items-center w-full h-full"
    >
      @if (!this.messageStore.get().isLoading()) {
      <div class="flex flex-col w-full md:w-1/2 h-full p-2">
        @for (message of this.messageStore.get().messageList().values; track
        $index) {
        <mw-chat-message
          [message]="message"
          [profile]="profile"
          [room]="room"
        />
        }
      </div>
      } @else {
      <div class="flex flex-col justify-center items-center">
        <span class="loading loading-spinner loading-md text-primary"></span>
        <span>Cargando...</span>
      </div>
      }
    </div>
    <div class="chat__footer">
      <mw-chat-sender
        [roomId]="this.messageStore.get().isLoading() ? '' : room?.id"
      ></mw-chat-sender>
    </div>
  </div>
  <div
    class="chat__container--right"
    [excludeElement]="header"
    [ngClass]="{ 'chat__container--right--open': isOpenDetails }"
    (clickOutside)="isOpenDetails = false"
  >
    <mw-chat-detailer
      [room]="room"
      (detailTrigger)="isOpenDetails = false"
    ></mw-chat-detailer>
  </div>
</section>

@if (isOpenDetails) {
<div class="chat__overlay" (click)="isOpenDetails = false"></div>

}
